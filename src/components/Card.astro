---
interface Props {
  title: string;
  client: string;
  date: Date;
  status: 'draft' | 'sent' | 'accepted' | 'archived';
  summary?: string;
  tags?: string[];
  href: string;
  hasPassword?: boolean;
}

const { title, client, date, status, summary, tags, href, hasPassword } = Astro.props;

const statusColors = {
  draft: 'bg-gray-100 text-gray-800',
  sent: 'bg-blue-100 text-blue-800',
  accepted: 'bg-green-100 text-green-800',
  archived: 'bg-gray-100 text-gray-600',
};

const statusLabels = {
  draft: 'Rascunho',
  sent: 'Enviado',
  accepted: 'Aceito',
  archived: 'Arquivado',
};

const formattedDate = new Date(date).toLocaleDateString('pt-BR', {
  year: 'numeric',
  month: 'long',
  day: 'numeric',
});
---

<a
  href={href}
  class="group block rounded-lg border border-gray-200 bg-white p-6 transition-all hover:border-gray-300 hover:shadow-md"
>
  <div class="mb-3 flex items-start justify-between gap-4">
    <h3 class="text-lg font-semibold text-gray-900 group-hover:text-blue-600">
      {title}
      {hasPassword && (
        <span class="ml-2 text-sm text-gray-400" title="Protegido por senha">
          ðŸ”’
        </span>
      )}
    </h3>
    <span class={`rounded-full px-3 py-1 text-xs font-medium ${statusColors[status]}`}>
      {statusLabels[status]}
    </span>
  </div>

  <div class="mb-3 text-sm text-gray-600">
    <p class="font-medium">{client}</p>
    <p class="text-gray-500">{formattedDate}</p>
  </div>

  {summary && (
    <p class="mb-3 text-sm text-gray-700 line-clamp-2">
      {summary}
    </p>
  )}

  {tags && tags.length > 0 && (
    <div class="flex flex-wrap gap-2">
      {tags.map((tag) => (
        <span class="rounded bg-gray-100 px-2 py-1 text-xs text-gray-600">
          {tag}
        </span>
      ))}
    </div>
  )}
</a>
